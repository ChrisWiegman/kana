# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).


## 0.14.1 - 2024-01-07

### Chores

* Update GitHub action versions

## 0.14.0 - 2024-01-06

### Features

* Allow for abstract PHP and MariaDB versions in the config.
* Kana will now detect if a folder where a site is started is a theme or a plugin and start the appropriate site type.

### Chores

* Cleanup Go modules with go mod tidy
* Update project dependencies

## 0.13.1 - 2023-11-15

### Features

* Change default image update check from 1 day to 7 days

### Chores

* Update project dependencies

## 0.13.0 - 2023-09-30

### Features

* Only add Kana's SSL certificate to the MacOS keychain when it needs to be used.
* Adds a `trust-ssl` command for Mac to easily add the SSL cert to the Mac system Keychain

### Bug Fixes

* Ensure the local SSL setting is respected to load the correct URL
* Ensures the --ssl start flag is properly implemented and set.

### Chores

* Update project dependencies

## 0.12.0 - 2023-09-17

### Features

* The `list` command no longer requires that Docker be running for use.
* Add config setting that will delete the default WordPress plugins when starting a new site

### Bug Fixes

* Ensure we're properly checking for errors when files and other streams are closed.
* Ensure the `export` command properly handles the `databaseClient` and `multisite` settings.

### Chores

* Update Go dependencies

## 0.11.2 - 2023-09-04

### Features

* Use the current Docker context to find the correct Docker host. This results in more reliable connections to Docker, particularly with Docker Desktop.
* Kana will no longer try to start Docker automatically if it cannot connect to it on Mac.

### Bug Fixes

* Removed the extra information that reiterated the empty site list on the `list` command as the table format has since made it redundant.
* Upate confirmation text on `stop` command to make it easier to read.

### Chores

* Update project dependencies

## 0.11.1 - 2023-08-16

### Chores

* Update project dependencies
* Update CI/CD processes to Go 1.21

## 0.11.0 - 2023-07-26

### Features

* Added the ability to open a database directly in TablePlus instead of PhpMyAdmin.
* Add support for both subdirectory and subdomain multisite installations

### Bug Fixes

* Ensure the config item `imageUpdateDays` isn't case sensitive
* Ensure the proper error message is displayed when a CLI command fails
* Remove erroneous debugging statement when using the "activate" flag on startup.

### Chores

* Update Go dependencies

## 0.10.1 - 2023-07-08

### Chores

* Update GoLang upstream dependencies
* Update GoReleaser config to fix deprecations.

## 0.10.0 - 2023-06-25

### Features

* Added `flush` command which flushes the cache and deletes all transients

## 0.9.0 - 2023-06-25

### Breaking Changes

* Renamed `phpmyadmin` flag to `database` on the _open_ command to better reflect its operation.
* Changed default MariaDB version from 10 to 11.

### Features

* Users can now choose between MariaDB 10 or 11 using the config command or settings files.

### Bug Fixes

* PHP version will properly revert to default if an invalid configuration is entered into settings

## 0.8.1 - 2023-06-19

### Bug Fixes

* Ensure Xdebug can be installed when running Kana on Linux

## 0.8.0 - 2023-06-18

### Features

* Add `xdebug` command to make managing Xdebug easier
* Suppress non-JSON output when downloading new images if `--output-json` flag is set on the command.

### Bug Fixes

* Show an empty array rather than `null` when there are no sites and the `kana list` command is used with the `--output-json` flag

### Chores

* Update Go project dependencies

## 0.7.0 - 2023-06-10

### Breaking Changes

* Kana now requires Docker Desktop 4.20.0 or greater or Docker Engine 24 or greater

### Features

* Add ability to only check for image updates with configurable `ImageUpdateDays` config setting
* Kana will automatically activate `plugin` or `theme` projects when starting a new site. This can be turned off with the `activate` config option

### Bug Fixes

* Remove duplicate image checks
* Ensure project is available for wp-cli commands if type is set as "plugin" or "theme"
* Fixed a bug that would cause the `list` command to fail

### Chores

* Updated upstream Go dependencies
* Update base Traefik image to 2.10

## 0.6.2 - 2023-05-13

### Security Fixes

* Update Go's Docker module per Dependabot (https://github.com/ChrisWiegman/kana-cli/pull/18)

## 0.6.1 - 2023-04-22

### Features

* Improve Xdebug output by setting PHP's `html_errors` to `true` and setting `xdebug.mode` to `debug,develop,trace`. This will give much more informative and readable debugging output.
* Introduced `wpdebug` setting to ensure WP_DEBUG is always available when needed.
* Always show pull status for Docker images.
* Improved output ot `list` command with better messaging when the list is empty.
* Prevent users from starting a new site using their homedir as the working directory

### Chores

* Update project dependencies

## 0.6.0 - 2023-02-26

### Breaking Changes

* Sites no longer start with forced SSL by default. See the `ssl` config item to adjust
* Remove PhpMyAdmin configuration and flag. It will now open on demand

### Features

* Add SSL config item to make it easier to use https or http in site configurations
* Kana will no longer error out when running the open command on Mailpit of PhpMyAdmin if the apps haven't been started. Instead it will start the apps and open as appropriate.

### Bug Fixes

* Fix various typos and default settings the the project README
* Ensure Mailpit configuration item is in export
* PhpMyAdmin will now open and operate correctly on Linux

### Chores

* Update test suite and increase test coverage

## 0.5.0 - 2023-01-29

### Features

* Add hidden, persistent `output-json` flag to allow me to abstract the CLI more easily in other applications
* By default download progress of images will not be shown unless the `verbose` flag is used for the given command
* Add "app" flag to `open` command to allow for easily opening phpmyadmin
* Add Mailpit to allow for email intercept and troubleshooting.

### Bug Fixes

* Lock Mariadb version to '10' instead of 'latest' to avoid breakage in the future
* Ensure site names always use dashes instead of underscores
* Do not always force https redirect in dev environment

### Chores

* Update upstream GoLang dependencies

## 0.4.0 - 2023-01-21

### Breaking Changes

* The `confirm-destroy` flag on the `destroy` command has been replaced with the `force` flag

### Features

* Simplified image pulling status by using Docker's default status display

## 0.3.0 - 2023-01-21

### Features

- Add `list` command to list all known Kana sites and their current status
- Hides the `completion` command that was added by the library I had been using

## 0.2.2 - 2023-01-21

### Breaking Changes

* Kana on Mac now requires Docker Desktop 4.14.0 or later or a version prior to 4.13.0 due to a breaking change in Docker Desktop 4.13.0 that has since been reversed.

### Features

* Always ensure the docker images are up to date when starting a site
* Add golangci-lint to project to ensure higher-quality code

### Bug Fixes

* Fixes the "plugin" flag on new sites so that it will now work as intended
* Lock Traefik image to 2.9 instead of "latest" to prevent future issues.

### Chores

* Update GoLang project dependencies

## 0.2.1 - 2022-12-15

### Features

* Add support for PHP 8.2 (enable this in your site or app configuration)

## 0.2.0 - 2022-12-14

### Features

* Heavy refactor of the application to better reflect how its use has evolved as well as to be more performant.
* Removed the redundant "Commit Hash" from the version command
* Default "config" command will now list local site values as well as global app configuration values
* The default PHP version for new installs is now 8.1
* Assign a random port to bind the database to the host. This allows external DB apps like TablePlus to be able to access the DB directly
* Add phpMyAdmin to local sites using the `phpmyadmin` setting or start flag
* Add initial Linux support
* Linux version can now be installed via Homebrew and .deb and .rpm files are available on GitHub releases
* Only install default plugins that aren't already installed
* Warn the user (without failing) if a default plugin cannot be installed

### Bug Fixes

* Using the "name" flag now works with sites that had originally been started with the "--local" flag

### Chores

* Update Go dependencies

## 0.1.0 - 2022-11-26
### Features
* Added "db import" and "db export" command to make working with existing databases a bit easier.
* Kana will now properly warn when running a command that requires a site that is running
* Prompt for confirmation when "destroy" is used or automatically confirm with `--confirm-destroy` flag
* Improve output messages for easier determination of command results
* Added a global "verbose" flag which will display a trace when an error occurs as well as other more detailed output to more easily troubleshoot what is going on
### Bug Fixes
* Kana will no longer create a site config folder when running commands other than "start"
* Show a more usable error message when using the `open` command on a site that hasn't been started
* WP-CLI will now use the same PHP version as the local site
### Chores
* Update project's dependencies

## 0.0.5 - 2022-10-30
### Bug Fixes
* Fix issue where Docker Desktop 4.13 breaks Kana due to no longer setting /var/run/docker.sock (see https://docs.docker.com/desktop/release-notes/#docker-desktop-4130)
### Chores
* Update project dependencies

## 0.0.4 - 2022-09-24
### Bug Fixes
* Ensure wp-cli commands work on theme and plugin projects.
### Chores
* Update changelog to make more sense on files

## 0.0.3 - 2022-09-18
### Chores
* Test release to ensure changelog is properly populating
* Improve installation instructions for homebrew usage

## 0.0.2 - 2022-09-18
### Features
* Add Homebrew support for easier installation
* Use .zip instead or .tar.gz for distributed files
### Bug Fixes
* Prevent site failure if an existing wp-config is already present when using the "local" flag. #3
* Prevent race condition that can occur due to Traefik not finishing full SSL config before we check the site.

## 0.0.1 - 2022-09-11
### Features
* Initial release
