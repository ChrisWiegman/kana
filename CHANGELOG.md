# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html),
and is generated by [Changie](https://github.com/miniscruff/changie).


## 0.24.10 - 2025-06-15

### Chores

* Update project dependencies

## 0.24.9 - 2025-05-18

### Chores

* Update default Traefik version to 3.4

## 0.24.8 - 2025-05-17

### Bug Fixes

* Fixed an error on site start due to a change in output of `wp plugin list`

### Chores

* Update project dependencies

## 0.24.7 - 2025-05-02

### Bug Fixes

* Fix a bug that broke the `trust-ssl` command on Mac

### Chores

* Update project dependencies

## 0.24.6 - 2025-04-26

### Features

* Change default PHP version to 8.4

## 0.24.5 - 2025-04-26

### Bug Fixes

* Fix type deprecations in latest Moby release

### Chores

* Update project dependencies

## 0.24.4 - 2025-02-15

### Chores

* Update project dependencies
* Update go version to 1.24

## 0.24.3 - 2025-01-15

### Chores

* Update project dependencies
* Change default PHP version to 8.3
* Update Traefik to version 3.3
* Update default MySQL version to 9

## 0.24.2 - 2024-09-22

### Chores

* Revert naming to the original `kana`

## 0.24.1 - 2024-09-22

### Bug Fixes

* Fix the package name to `kana`

## 0.24.0 - 2024-09-22

### Breaking Changes

* The GitHub repository for the project has been renamed to `kana` to better reflect the use case of the software

### Chores

* Update project dependencies

## 0.23.1 - 2024-08-22

### Chores

* Update project dependencies.
* Update Go version to 1.23
* Update GitHub Actions to Ubuntu 24.04

## 0.23.0 - 2024-08-04

### Breaking Changes

* The start flag `remove-default-plugins` has been renamed to `removedefaultplugins` for consistency
* The config options for the initial admin user have been changed to remove the "." from the option. `admin.email` is now `adminemail`, `admin.username` is now `adminuser` and `admin.password` is now `adminpassword`.

### Bug Fixes

* Fix an error that could prevent default plugins from being installed.

### Chores

* Improve test runs on all branches
* Update Traefik to version 3.1.
* Kana settings has been significantly refactored to allow easier updating

## 0.22.0 - 2024-06-27

### Breaking Changes

* Renamed the `mariadb` config option to `databaseVersion` to better accomodate different database options.
* The `ImageUpdateDays` settings has been renamed to `UpdateInterval`. This will allow it to be reused more easily, where appropriate.

### Features

* Add the ability to use SQLite as a database in place of MariaDB
* Add option to use MySQL in addition to MariaDB and SQLite
* Kana will now check that the database is ready before continuing site setup. This should result in more reliable site startup.

### Bug Fixes

* When outputting JSON results, the extra line break at the end of the output should be removed
* When saving changes to various settings the type of the setting will now be maintained in the config file.

### Chores

* Update project dependencies.
* Improve testing throughout the project
* The `settings` package has been heavily refactored to help ensure stable development in the future.
* Update GitHub Actions for more reliable releases and testing

## 0.21.2 - 2024-05-29

### Bug Fixes

* Ensure WordPress always has access to the files and can install plugins/themes or do other file operations from the Dashboard

### Chores

* Update project dependencies.

## 0.21.1 - 2024-05-25

### Bug Fixes

* Don't display install theme message when it isn't needed.

### Chores

* Update project dependencies.

## 0.21.0 - 2024-05-24

### Breaking Changes

* The primary domain for Kana, kana.li, has been replaced with `kana.sh`.

### Features

* The list command will now highlight the site path in yellow if it no longer exists.

### Bug Fixes

* Fixes an issue with the automatic WordPress login that prevented login if the admin user differs from the configured user.
* Ensure we're properly using the automaticLogin setting to allow or prevent logins.

### Chores

* Update project dependencies

## 0.20.2 - 2024-05-15

### Bug Fixes

* Ensure type detection message ends with a line break.
* Fix an error when starting a theme due to a false positive in default theme detection.

### Chores

* Update project dependencies

## 0.20.1 - 2024-05-05

### Bug Fixes

* Fix an error that prevented a site from starting when the current folder was detected as a plugin or a theme.

### Chores

* Update projecct dependencies

## 0.20.0 - 2024-05-05

### Breaking Changes

* Shorthand flags for string parameters have been removed. For example, the `name` flag must use the full "--name=" syntax and the "-n=" has been removed.
* Rename `adminLogin` setting to `automaticLogin`

### Features

* Adds a "theme" option to set a default theme (not available for sites where the type is set to "theme")
* Sort `config` command output alphabetically
* Add `plugins` flag to install specified plugins on start.
* Allow for global configuration of default plugins

### Bug Fixes

* Always ensure that all default plugins are installed and activated on site start

### Chores

* Update project dependencies

## 0.19.0 - 2024-05-04

### Features

* Update Traefik to 3.0.0 (https://traefik.io/blog/traefik-3-0-ga-has-landed-heres-how-to-migrate/)
* Automatically login to wp_admin when opening a wp_admin URL
* Introduce the `adminLogin` config variable to allow users to disable automatic login into the WordPress Dashboard
* Introduce the `IS_KANA_ENVIRONMENT` env variable to allow developers to verify they're working in a Kana development environment

### Bug Fixes

* Fixed a warning in the Traefik rules due to an improper rule
* WordPress will no longer display an email send error if Mailpit is running
* Fix documentation of default PHP version

### Chores

* Update project dependencies

## 0.18.7 - 2024-04-22

### Features

* Update Traefik container name to make format of other containers.

### Bug Fixes

* Ensure the current Docker context is always used as appropriate

### Chores

* Update project dependencies

## 0.18.6 - 2024-03-19

### Chores

* Update project dependencies
* Rename repository from `kana-cli` to `kana`

## 0.18.5 - 2024-03-19

### Bug Fixes

* Fix a bug preventing wp-cli commands running on named sites.

### Chores

* Update project dependencies

## 0.18.4 - 2024-03-17

### Bug Fixes

* Ensure wp-cli can run on plugins and themes.
* Ensure we can run interactive wp-cli commands such as help

### Chores

* Update project dependencies
* Add further testing including full command tests

## 0.18.3 - 2024-03-16

### Features

* Add an `admin` flag to the open command to make accessing the WordPress dashboard easier.

### Bug Fixes

* Save proper site name and version when creating mu plugin
* Don't show a "directory not empty" error for named sites.
* Fix `xdebug` command description
* Fix an issue that caused a fatal error when running `kana db export`

### Chores

* Refactor: use simpler function names to make the naming convention easier.

## 0.18.2 - 2024-03-15

### Chores

* Update project dependencies.

## 0.18.1 - 2024-02-25

### Chores

* Switch to PHP 8.2 as the default PHP version for new sites
* Update Traefik from 2.10 to 2.11

## 0.18.0 - 2024-02-25

### Breaking Changes

* Removed `theme` and `plugin` start flags in favor of the single `type` start flag.
* Removed the self-updater. For now the app will stick with Homebrew for updates.

### Chores

* Update project dependencies.
* Update to Go 1.22

## 0.17.2 - 2024-02-07

### Bug Fixes

* Fixed a bug whereby SCRIPT_DEBUG wasn't accurately accounted for when using the `export` command.
* Abort the update check without failing if we can't conact the server.

### Chores

* Update project dependencies.

## 0.17.1 - 2024-01-21

### Bug Fixes

* Fixed an error that could break numerous commands as the correct site type was not being set.

## 0.17.0 - 2024-01-21

### Features

* Add `changelog` command to help users understand what has changed between versions.
* Add `update` command to self-update Kana for installations that didn't use Homebrew.
* Will check for updates and warn users of a newer version if one is available.

## 0.16.0 - 2024-01-20

### Breaking Changes

* Removes the `local` flag and related configuration items. All sites that don't use the `name` flag now store their WordPress and database in the folder from which the site was initiated.

### Features

* Kana will ask for confirmation when starting a new site in a non-empty folder to avoid file conflicts with WordPress.

### Bug Fixes

* Environment will now be properly handled on export.

### Chores

* Update project dependencies.
* Updated Moby to version 25.x.

## 0.15.0 - 2024-01-07

### Features

* Added configuration items for `scriptdebug` which controls the wp-config `SCRIPT_DEBUG` configuration item.
* Added config option for `environment` which controls the wp-config `WP_ENVIRONMENT_TYPE` setting.
* Default `WP_ENVIRONMENT_TYPE` to `local` to better reflect the nature of a given site in the tool.

### Chores

* Update GitHub actions to use Ubuntu 22.04 on all actions for consistency and ensure all actions are up to date.

## 0.14.1 - 2024-01-07

### Chores

* Update GitHub action versions

## 0.14.0 - 2024-01-06

### Features

* Allow for abstract PHP and MariaDB versions in the config.
* Kana will now detect if a folder where a site is started is a theme or a plugin and start the appropriate site type.

### Chores

* Cleanup Go modules with go mod tidy
* Update project dependencies

## 0.13.1 - 2023-11-15

### Features

* Change default image update check from 1 day to 7 days

### Chores

* Update project dependencies

## 0.13.0 - 2023-09-30

### Features

* Only add Kana's SSL certificate to the MacOS keychain when it needs to be used.
* Adds a `trust-ssl` command for Mac to easily add the SSL cert to the Mac system Keychain

### Bug Fixes

* Ensure the local SSL setting is respected to load the correct URL
* Ensures the --ssl start flag is properly implemented and set.

### Chores

* Update project dependencies

## 0.12.0 - 2023-09-17

### Features

* The `list` command no longer requires that Docker be running for use.
* Add config setting that will delete the default WordPress plugins when starting a new site

### Bug Fixes

* Ensure we're properly checking for errors when files and other streams are closed.
* Ensure the `export` command properly handles the `databaseClient` and `multisite` settings.

### Chores

* Update Go dependencies

## 0.11.2 - 2023-09-04

### Features

* Use the current Docker context to find the correct Docker host. This results in more reliable connections to Docker, particularly with Docker Desktop.
* Kana will no longer try to start Docker automatically if it cannot connect to it on Mac.

### Bug Fixes

* Removed the extra information that reiterated the empty site list on the `list` command as the table format has since made it redundant.
* Upate confirmation text on `stop` command to make it easier to read.

### Chores

* Update project dependencies

## 0.11.1 - 2023-08-16

### Chores

* Update project dependencies
* Update CI/CD processes to Go 1.21

## 0.11.0 - 2023-07-26

### Features

* Added the ability to open a database directly in TablePlus instead of PhpMyAdmin.
* Add support for both subdirectory and subdomain multisite installations

### Bug Fixes

* Ensure the config item `imageUpdateDays` isn't case sensitive
* Ensure the proper error message is displayed when a CLI command fails
* Remove erroneous debugging statement when using the "activate" flag on startup.

### Chores

* Update Go dependencies

## 0.10.1 - 2023-07-08

### Chores

* Update GoLang upstream dependencies
* Update GoReleaser config to fix deprecations.

## 0.10.0 - 2023-06-25

### Features

* Added `flush` command which flushes the cache and deletes all transients

## 0.9.0 - 2023-06-25

### Breaking Changes

* Renamed `phpmyadmin` flag to `database` on the _open_ command to better reflect its operation.
* Changed default MariaDB version from 10 to 11.

### Features

* Users can now choose between MariaDB 10 or 11 using the config command or settings files.

### Bug Fixes

* PHP version will properly revert to default if an invalid configuration is entered into settings

## 0.8.1 - 2023-06-19

### Bug Fixes

* Ensure Xdebug can be installed when running Kana on Linux

## 0.8.0 - 2023-06-18

### Features

* Add `xdebug` command to make managing Xdebug easier
* Suppress non-JSON output when downloading new images if `--output-json` flag is set on the command.

### Bug Fixes

* Show an empty array rather than `null` when there are no sites and the `kana list` command is used with the `--output-json` flag

### Chores

* Update Go project dependencies

## 0.7.0 - 2023-06-10

### Breaking Changes

* Kana now requires Docker Desktop 4.20.0 or greater or Docker Engine 24 or greater

### Features

* Add ability to only check for image updates with configurable `ImageUpdateDays` config setting
* Kana will automatically activate `plugin` or `theme` projects when starting a new site. This can be turned off with the `activate` config option

### Bug Fixes

* Remove duplicate image checks
* Ensure project is available for wp-cli commands if type is set as "plugin" or "theme"
* Fixed a bug that would cause the `list` command to fail

### Chores

* Updated upstream Go dependencies
* Update base Traefik image to 2.10

## 0.6.2 - 2023-05-13

### Security Fixes

* Update Go's Docker module per Dependabot (https://github.com/ChrisWiegman/kana/pull/18)

## 0.6.1 - 2023-04-22

### Features

* Improve Xdebug output by setting PHP's `html_errors` to `true` and setting `xdebug.mode` to `debug,develop,trace`. This will give much more informative and readable debugging output.
* Introduced `wpdebug` setting to ensure WP_DEBUG is always available when needed.
* Always show pull status for Docker images.
* Improved output ot `list` command with better messaging when the list is empty.
* Prevent users from starting a new site using their homedir as the working directory

### Chores

* Update project dependencies

## 0.6.0 - 2023-02-26

### Breaking Changes

* Sites no longer start with forced SSL by default. See the `ssl` config item to adjust
* Remove PhpMyAdmin configuration and flag. It will now open on demand

### Features

* Add SSL config item to make it easier to use https or http in site configurations
* Kana will no longer error out when running the open command on Mailpit of PhpMyAdmin if the apps haven't been started. Instead it will start the apps and open as appropriate.

### Bug Fixes

* Fix various typos and default settings the the project README
* Ensure Mailpit configuration item is in export
* PhpMyAdmin will now open and operate correctly on Linux

### Chores

* Update test suite and increase test coverage

## 0.5.0 - 2023-01-29

### Features

* Add hidden, persistent `output-json` flag to allow me to abstract the CLI more easily in other applications
* By default download progress of images will not be shown unless the `verbose` flag is used for the given command
* Add "app" flag to `open` command to allow for easily opening phpmyadmin
* Add Mailpit to allow for email intercept and troubleshooting.

### Bug Fixes

* Lock Mariadb version to '10' instead of 'latest' to avoid breakage in the future
* Ensure site names always use dashes instead of underscores
* Do not always force https redirect in dev environment

### Chores

* Update upstream GoLang dependencies

## 0.4.0 - 2023-01-21

### Breaking Changes

* The `confirm-destroy` flag on the `destroy` command has been replaced with the `force` flag

### Features

* Simplified image pulling status by using Docker's default status display

## 0.3.0 - 2023-01-21

### Features

- Add `list` command to list all known Kana sites and their current status
- Hides the `completion` command that was added by the library I had been using

## 0.2.2 - 2023-01-21

### Breaking Changes

* Kana on Mac now requires Docker Desktop 4.14.0 or later or a version prior to 4.13.0 due to a breaking change in Docker Desktop 4.13.0 that has since been reversed.

### Features

* Always ensure the docker images are up to date when starting a site
* Add golangci-lint to project to ensure higher-quality code

### Bug Fixes

* Fixes the "plugin" flag on new sites so that it will now work as intended
* Lock Traefik image to 2.9 instead of "latest" to prevent future issues.

### Chores

* Update GoLang project dependencies

## 0.2.1 - 2022-12-15

### Features

* Add support for PHP 8.2 (enable this in your site or app configuration)

## 0.2.0 - 2022-12-14

### Features

* Heavy refactor of the application to better reflect how its use has evolved as well as to be more performant.
* Removed the redundant "Commit Hash" from the version command
* Default "config" command will now list local site values as well as global app configuration values
* The default PHP version for new installs is now 8.1
* Assign a random port to bind the database to the host. This allows external DB apps like TablePlus to be able to access the DB directly
* Add phpMyAdmin to local sites using the `phpmyadmin` setting or start flag
* Add initial Linux support
* Linux version can now be installed via Homebrew and .deb and .rpm files are available on GitHub releases
* Only install default plugins that aren't already installed
* Warn the user (without failing) if a default plugin cannot be installed

### Bug Fixes

* Using the "name" flag now works with sites that had originally been started with the "--local" flag

### Chores

* Update Go dependencies

## 0.1.0 - 2022-11-26
### Features
* Added "db import" and "db export" command to make working with existing databases a bit easier.
* Kana will now properly warn when running a command that requires a site that is running
* Prompt for confirmation when "destroy" is used or automatically confirm with `--confirm-destroy` flag
* Improve output messages for easier determination of command results
* Added a global "verbose" flag which will display a trace when an error occurs as well as other more detailed output to more easily troubleshoot what is going on
### Bug Fixes
* Kana will no longer create a site config folder when running commands other than "start"
* Show a more usable error message when using the `open` command on a site that hasn't been started
* WP-CLI will now use the same PHP version as the local site
### Chores
* Update project's dependencies

## 0.0.5 - 2022-10-30
### Bug Fixes
* Fix issue where Docker Desktop 4.13 breaks Kana due to no longer setting /var/run/docker.sock (see https://docs.docker.com/desktop/release-notes/#docker-desktop-4130)
### Chores
* Update project dependencies

## 0.0.4 - 2022-09-24
### Bug Fixes
* Ensure wp-cli commands work on theme and plugin projects.
### Chores
* Update changelog to make more sense on files

## 0.0.3 - 2022-09-18
### Chores
* Test release to ensure changelog is properly populating
* Improve installation instructions for homebrew usage

## 0.0.2 - 2022-09-18
### Features
* Add Homebrew support for easier installation
* Use .zip instead or .tar.gz for distributed files
### Bug Fixes
* Prevent site failure if an existing wp-config is already present when using the "local" flag. #3
* Prevent race condition that can occur due to Traefik not finishing full SSL config before we check the site.

## 0.0.1 - 2022-09-11
### Features
* Initial release
